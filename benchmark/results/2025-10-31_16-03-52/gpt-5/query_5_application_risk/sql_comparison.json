{
  "ground_truth_sql": "SELECT TOP 5\n    master_app.[Name] AS ApplicationName,\n    COUNT(DISTINCT comp_app.[ComputerID]) AS AffectedComputerCount,\n    COUNT(DISTINCT cve.[CVEID]) AS TotalCVECount,\n    AVG(CAST(cve.[CVSSScore] AS FLOAT)) AS AvgCVSSScore\nFROM [tb_SaasMasterInstalledApps] master_app\n    INNER JOIN [tb_SaasComputerInstalledApps] comp_app\n        ON master_app.[Name] = comp_app.[Name]\n    INNER JOIN [tb_SaasComputerCVEMap] cve_map\n        ON comp_app.[ID] = cve_map.[InstalledAppID]\n    INNER JOIN [tb_CVE] cve\n        ON cve_map.[CVEID] = cve.[CVEID]\nWHERE master_app.[IsDeleted] = 0\n    AND comp_app.[IsDeleted] = 0\n    AND cve_map.[IsDeleted] = 0\n    AND cve.[IsDeleted] = 0\n    AND cve.[CVSSScore] IS NOT NULL\nGROUP BY master_app.[ID], master_app.[Name]\nHAVING COUNT(DISTINCT cve.[CVEID]) > 0\nORDER BY AvgCVSSScore DESC, TotalCVECount DESC\n",
  "generated_sql": "SELECT\nTOP 5\n  *\nFROM [tb_SaasInstalledAppsTemp]\nJOIN [tb_SaasScan]\n  ON [tb_SaasInstalledAppsTemp].[ScanID] = [tb_SaasScan].[ID]\nORDER BY\n  [tb_SaasInstalledAppsTemp].[CVENames] DESC,\n  [tb_SaasInstalledAppsTemp].[ApplicationName] ASC",
  "comparison_results": {
    "tables": {
      "ground_truth": [
        "TB_CVE",
        "TB_SAASMASTERINSTALLEDAPPS",
        "TB_SAASCOMPUTERINSTALLEDAPPS",
        "TB_SAASCOMPUTERCVEMAP"
      ],
      "generated": [
        "TB_SAASSCAN",
        "TB_SAASINSTALLEDAPPSTEMP"
      ],
      "match": false,
      "missing": [
        "TB_SAASCOMPUTERCVEMAP",
        "TB_SAASMASTERINSTALLEDAPPS",
        "TB_SAASCOMPUTERINSTALLEDAPPS",
        "TB_CVE"
      ],
      "extra": [
        "TB_SAASSCAN",
        "TB_SAASINSTALLEDAPPSTEMP"
      ]
    },
    "joins": {
      "ground_truth_count": 3,
      "generated_count": 1,
      "match": false
    },
    "conditions": {
      "ground_truth_count": 1,
      "generated_count": 0,
      "match": false
    },
    "aggregations": {
      "ground_truth": [
        "COUNT(DISTINCT comp_app.\"ComputerID\")",
        "COUNT(DISTINCT cve.\"CVEID\")",
        "AVG(CAST(cve.\"CVSSScore\" AS FLOAT))",
        "COUNT(DISTINCT cve.\"CVEID\")"
      ],
      "generated": [],
      "match": false
    },
    "group_by": {
      "ground_truth": [
        "master_app.\"ID\"",
        "master_app.\"Name\""
      ],
      "generated": [],
      "match": false
    },
    "order_by": {
      "ground_truth": [
        {
          "column": "AvgCVSSScore",
          "direction": "DESC"
        },
        {
          "column": "TotalCVECount",
          "direction": "DESC"
        }
      ],
      "generated": [
        {
          "column": "\"tb_SaasInstalledAppsTemp\".\"CVENames\"",
          "direction": "DESC"
        },
        {
          "column": "\"tb_SaasInstalledAppsTemp\".\"ApplicationName\"",
          "direction": "ASC"
        }
      ],
      "match": false
    }
  },
  "quality_score": 36,
  "differences_summary": "### SQL Comparison Summary\n\n**Tables X**\n- Missing: TB_SAASCOMPUTERCVEMAP, TB_SAASMASTERINSTALLEDAPPS, TB_SAASCOMPUTERINSTALLEDAPPS, TB_CVE\n- Extra: TB_SAASSCAN, TB_SAASINSTALLEDAPPSTEMP\n\n**Joins X**\n- Ground truth: 3 joins\n- Generated: 1 joins\n\n**Aggregations X**\n- Ground truth: COUNT(DISTINCT comp_app.\"ComputerID\"), COUNT(DISTINCT cve.\"CVEID\"), AVG(CAST(cve.\"CVSSScore\" AS FLOAT)), COUNT(DISTINCT cve.\"CVEID\")\n"
}