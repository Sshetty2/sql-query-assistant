{
  "ground_truth_sql": "SELECT\n    c.[Name] AS CompanyName,\n    COUNT(DISTINCT comp.[ID]) AS ComputerCount,\n    COUNT(DISTINCT cve.[CVEID]) AS CriticalCVECount\nFROM [tb_Company] c\n    INNER JOIN [tb_SaasComputers] comp ON c.[ID] = comp.[CompanyID]\n    INNER JOIN [tb_SaasComputerCVEMap] cve_map ON comp.[ID] = cve_map.[ComputerID]\n    INNER JOIN [tb_CVE] cve ON cve_map.[CVEID] = cve.[CVEID]\n    INNER JOIN [tb_SaasPendingPatch] pp ON comp.[ID] = pp.[ComputerID]\nWHERE cve.[CVSSScore] > 7.0\n    AND comp.[IsDeleted] = 0\n    AND cve_map.[IsDeleted] = 0\n    AND cve.[IsDeleted] = 0\n    AND pp.[IsActive] = 1\nGROUP BY c.[ID], c.[Name]\nORDER BY CriticalCVECount DESC, ComputerCount DESC\n",
  "generated_sql": "SELECT\nTOP 500\n  *\nFROM [tb_SaasComputerCVEMap]\nJOIN [tb_Company]\n  ON [tb_SaasComputerCVEMap].[CompanyID] = [tb_Company].[ID]\nJOIN [tb_CVEConfigurationMap]\n  ON [tb_SaasComputerCVEMap].[CVEConfigurationMapID] = [tb_CVEConfigurationMap].[CVEConfigurationMapID]\nORDER BY\n  [tb_Company].[Name] ASC",
  "comparison_results": {
    "tables": {
      "ground_truth": [
        "TB_SAASCOMPUTERS",
        "TB_SAASPENDINGPATCH",
        "TB_COMPANY",
        "TB_SAASCOMPUTERCVEMAP",
        "TB_CVE"
      ],
      "generated": [
        "TB_CVECONFIGURATIONMAP",
        "TB_COMPANY",
        "TB_SAASCOMPUTERCVEMAP"
      ],
      "match": false,
      "missing": [
        "TB_CVE",
        "TB_SAASCOMPUTERS",
        "TB_SAASPENDINGPATCH"
      ],
      "extra": [
        "TB_CVECONFIGURATIONMAP"
      ]
    },
    "joins": {
      "ground_truth_count": 4,
      "generated_count": 2,
      "match": false
    },
    "conditions": {
      "ground_truth_count": 1,
      "generated_count": 0,
      "match": false
    },
    "aggregations": {
      "ground_truth": [
        "COUNT(DISTINCT comp.\"ID\")",
        "COUNT(DISTINCT cve.\"CVEID\")"
      ],
      "generated": [],
      "match": false
    },
    "group_by": {
      "ground_truth": [
        "c.\"ID\"",
        "c.\"Name\""
      ],
      "generated": [],
      "match": false
    },
    "order_by": {
      "ground_truth": [
        {
          "column": "CriticalCVECount",
          "direction": "DESC"
        },
        {
          "column": "ComputerCount",
          "direction": "DESC"
        }
      ],
      "generated": [
        {
          "column": "\"tb_Company\".\"Name\"",
          "direction": "ASC"
        }
      ],
      "match": false
    }
  },
  "quality_score": 48,
  "differences_summary": "### SQL Comparison Summary\n\n**Tables X**\n- Missing: TB_CVE, TB_SAASCOMPUTERS, TB_SAASPENDINGPATCH\n- Extra: TB_CVECONFIGURATIONMAP\n\n**Joins X**\n- Ground truth: 4 joins\n- Generated: 2 joins\n\n**Aggregations X**\n- Ground truth: COUNT(DISTINCT comp.\"ID\"), COUNT(DISTINCT cve.\"CVEID\")\n"
}